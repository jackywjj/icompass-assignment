# 协同文本编辑器

一个功能丰富的实时协同文本编辑器，基于 React + TypeScript 构建。

## 功能特性

### 文本编辑基础功能
- ✅ 支持文本输入、编辑和实时显示
- ✅ 富文本格式化（粗体、斜体、下划线、删除线）
- ✅ 支持文字颜色和字号设置
- ✅ 支持有序/无序列表
- ✅ 支持段落格式和标题

### 文本管理
- ✅ 支持一键清空所有文本内容
- ✅ 支持将文本内容保存到浏览器本地存储（LocalStorage）

### 字数统计
- ✅ 实时显示文档字数统计信息（字数、字符数）

### 实时协同编辑
- ✅ 支持多用户同时编辑同一文档（模拟实现）
- ✅ 实时显示各用户光标位置和编辑状态
- ✅ 用户可看到其他协作者的光标位置和状态

### 版本历史
- ✅ 支持文档历史版本存档
- ✅ 支持查看和恢复历史版本

### 审阅模式
- ✅ 支持审阅模式，可高亮标记需要审阅的文本
- ✅ 审阅完成后，其他用户可查看审阅内容
- ✅ 支持添加审阅意见和标记已解决

### 批注功能
- ✅ 支持对文本添加批注（参考 Microsoft Word、Google Docs 的批注功能）
- ✅ 批注可显示在文档侧边
- ✅ 支持批注的添加、查看和回复

## 技术栈

- **框架**: React 18
- **语言**: TypeScript
- **构建工具**: Vite
- **包管理器**: pnpm
- **富文本编辑器**: Quill
- **Node 版本**: 20

## 安装和运行

### 前置要求
- Node.js 20+
- pnpm

### 安装依赖
```bash
pnpm install
```

### 开发模式
```bash
pnpm dev
```

应用将在 http://localhost:3000 启动

### 构建生产版本
```bash
pnpm build
```

### 预览生产版本
```bash
pnpm preview
```

## 项目结构

```
assign/
├── src/
│   ├── components/
│   │   ├── Editor.tsx          # 主编辑器组件
│   │   └── Editor.css          # 编辑器样式
│   ├── types/
│   │   └── index.ts            # TypeScript 类型定义
│   ├── utils/
│   │   ├── storage.ts          # 本地存储工具
│   │   ├── user.ts             # 用户管理工具
│   │   └── collaboration.ts    # 协同编辑服务（模拟）
│   ├── App.tsx                 # 应用主组件
│   ├── App.css                 # 应用样式
│   ├── main.tsx                # 应用入口
│   └── index.css               # 全局样式
├── index.html                  # HTML 模板
├── package.json                # 项目配置
├── tsconfig.json               # TypeScript 配置
├── vite.config.ts              # Vite 配置
└── README.md                   # 项目说明
```

## 使用说明

### 基本编辑
1. 在编辑器中直接输入文本
2. 使用工具栏进行格式化（粗体、斜体、颜色、字号等）
3. 内容会自动保存到本地存储

### 版本管理
1. 点击"保存版本"按钮保存当前版本
2. 点击"版本历史"查看所有历史版本
3. 点击"恢复"按钮可以恢复到指定版本

### 审阅模式
1. 点击"审阅模式"按钮启用审阅模式
2. 选择需要审阅的文本
3. 点击"添加审阅"按钮添加审阅标记
4. 在审阅面板中可以添加审阅意见
5. 审阅完成后可以标记为"已解决"

### 批注功能
1. 选择要批注的文本
2. 点击"添加批注"按钮
3. 输入批注内容
4. 点击"批注"按钮查看所有批注
5. 在批注列表中可以对批注进行回复

### 协同编辑
- 当前版本使用模拟的协同编辑服务
- 在实际部署中，需要配置真实的 WebSocket 服务器
- 建议使用 Yjs + WebSocket 实现真正的实时协同编辑

## 注意事项

1. **实时协同编辑**: 当前实现为模拟版本，实际生产环境需要配置 WebSocket 服务器
2. **数据存储**: 所有数据存储在浏览器本地，清除浏览器数据会丢失内容
3. **版本限制**: 版本历史最多保留 50 个版本
4. **浏览器兼容性**: 建议使用现代浏览器（Chrome、Firefox、Safari、Edge）

## 未来改进

- [ ] 集成真实的 WebSocket 服务器实现真正的实时协同
- [ ] 添加用户认证和权限管理
- [ ] 支持云端存储和同步
- [ ] 优化移动端体验
- [ ] 添加更多富文本格式选项
- [ ] 支持导出为 PDF、Word 等格式

## 许可证

MIT

